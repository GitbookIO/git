# Git ë ˆí¼ëŸ°ìŠ¤

`git log 1a410e` ë¼ê³  ì‹¤í–‰í•˜ë©´ ì „ì²´ íˆìŠ¤í† ë¦¬ë¥¼ ë³¼ ìˆ˜ ìˆì§€ë§Œ, ì—¬ì „íˆ `1a410e`ë¥¼ ê¸°ì–µí•´ì•¼ í•œë‹¤. ì´ ì»¤ë°‹ì€ ë§ˆì§€ë§‰ ì»¤ë°‹ì´ê¸° ë•Œë¬¸ì— íˆìŠ¤í† ë¦¬ë¥¼ ë”°ë¼ ëª¨ë“  ê°œì²´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤. SHA-1 ê°’ì„ ë‚ ë¡œ ì‚¬ìš©í•˜ê¸°ë³´ë‹¤ ì‰¬ìš´ ì´ë¦„ìœ¼ë¡œ ëœ í¬ì¸í„°ê°€ ìˆìœ¼ë©´ ê·¸ê±¸ ì‚¬ìš©í•˜ëŠ”ê²Œ ë” ì¢‹ë‹¤. ì™¸ìš°ê¸° ì‰¬ìš´ ì´ë¦„ìœ¼ë¡œ ëœ íŒŒì¼ì— SHA-1 ê°’ì„ ì €ì¥í•œë‹¤.

Gitì—ì„œëŠ” ì´ëŸ° ê²ƒì„ "ë ˆí¼ëŸ°ìŠ¤" ë˜ëŠ” "refs"ë¼ê³  ë¶€ë¥¸ë‹¤. SHA-1 ê°’ì´ ë“  íŒŒì¼ì€ `.git/refs` ë””ë ‰í† ë¦¬ì— ìˆë‹¤. ì´ í”„ë¡œì íŠ¸ì—ëŠ” ì•„ì§ ë ˆí¼ëŸ°ìŠ¤ê°€ í•˜ë‚˜ë„ ì—†ë‹¤. ì´ ë””ë ‰í† ë¦¬ì˜ êµ¬ì¡°ëŠ” ë§¤ìš° ë‹¨ìˆœí•˜ë‹¤:

	$ find .git/refs
	.git/refs
	.git/refs/heads
	.git/refs/tags
	$ find .git/refs -type f
	$

ë ˆí¼ëŸ°ìŠ¤ê°€ ìˆìœ¼ë©´ ë§ˆì§€ë§‰ ì»¤ë°‹ì´ ë¬´ì—‡ì¸ì§€ ê¸°ì–µí•˜ê¸° ì‰½ë‹¤. ì‚¬ì‹¤ ë‚´ë¶€ëŠ” ì•„ë˜ì²˜ëŸ¼ ë‹¨ìˆœí•˜ë‹¤:

	$ echo "1a410efbd13591db07496601ebc7a059dd55cfe9" > .git/refs/heads/master

SHA-1 ê°’ ëŒ€ì‹ ì— ì§€ê¸ˆ ë§Œë“  ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤:

	$ git log --pretty=oneline  master
	1a410efbd13591db07496601ebc7a059dd55cfe9 third commit
	cac0cab538b970a37ea1e769cbbde608743bc96d second commit
	fdf4fc3344e67ab068f836878b6c4951e3b15f3d first commit

ë ˆí¼ëŸ°ìŠ¤ íŒŒì¼ì„ ì§ì ‘ ê³ ì¹˜ëŠ” ê²ƒì´ ì¢€ ëª»ë§ˆë•…í•˜ë‹¤. Gitì—ëŠ” ì¢€ ë” ì•ˆì „í•˜ê²Œ ë°”ê¿€ ìˆ˜ ìˆëŠ” `update-ref` ëª…ë ¹ì´ ìˆë‹¤:

	$ git update-ref refs/heads/master 1a410efbd13591db07496601ebc7a059dd55cfe9

Git ë¸Œëœì¹˜ì˜ ì—­í• ì´ ë°”ë¡œ ì´ê±°ë‹¤. ë¸Œëœì¹˜ëŠ” ì–´ë–¤ ì‘ì—…ë“¤ ì¤‘ ë§ˆì§€ë§‰ ì‘ì—…ì„ ê°€ë¦¬í‚¤ëŠ” í¬ì¸í„° ë˜ëŠ” ë ˆí¼ëŸ°ìŠ¤ì´ë‹¤. ê°„ë‹¨íˆ ë‘ ë²ˆì§¸ ì»¤ë°‹ì„ ê°€ë¦¬í‚¤ëŠ” ë¸Œëœì¹˜ë¥¼ ë§Œë“¤ì–´ ë³´ì:

	$ git update-ref refs/heads/test cac0ca

ë¸Œëœì¹˜ëŠ” ì§ì ‘ ê°€ë¦¬í‚¤ëŠ” ì»¤ë°‹ê³¼ ê·¸ ì»¤ë°‹ìœ¼ë¡œ ë”°ë¼ê°ˆ ìˆ˜ ìˆëŠ” ëª¨ë“  ì»¤ë°‹ì„ í¬í•¨í•œë‹¤:

	$ git log --pretty=oneline test
	cac0cab538b970a37ea1e769cbbde608743bc96d second commit
	fdf4fc3344e67ab068f836878b6c4951e3b15f3d first commit

ì´ì œ Git ë°ì´í„°ë² ì´ìŠ¤ëŠ” ê·¸ë¦¼ 9-4ì²˜ëŸ¼ ë³´ì¸ë‹¤.


![](http://git-scm.com/figures/18333fig0904-tn.png)

ê·¸ë¦¼ 9-4. ë¸Œëœì¹˜ ë ˆí¼ëŸ°ìŠ¤ê°€ ì¶”ê°€ëœ Git ë°ì´í„°ë² ì´ìŠ¤

`git branch (branchname)` ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ Gitì€ ë‚´ë¶€ì ìœ¼ë¡œ `update-ref` ëª…ë ¹ì„ ì‹¤í–‰í•œë‹¤. ì…ë ¥ë°›ì€ ë¸Œëœì¹˜ ì´ë¦„ê³¼ í˜„ ë¸Œëœì¹˜ì˜ ë§ˆì§€ë§‰ ì»¤ë°‹ì˜ SHA-1 ê°’ì„ ê°€ì ¸ë‹¤ `update-ref` ëª…ë ¹ì„ ì‹¤í–‰í•œë‹¤.

## HEAD

`git branch (branchname)` ëª…ë ¹ì„ ì‹¤í–‰í•  ë•Œ Gitì€ ì–´ë–»ê²Œ ë§ˆì§€ë§‰ ì»¤ë°‹ì˜ SHA-1 ê°’ì„ ì•„ëŠ” ê±¸ê¹Œ? HEAD íŒŒì¼ì€ í˜„ ë¸Œëœì¹˜ë¥¼ ê°€ë¦¬í‚¤ëŠ” ê°„ì ‘(symbolic) ë ˆí¼ëŸ°ìŠ¤ë‹¤. ê°„ì ‘ ë ˆí¼ëŸ°ìŠ¤ì´ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ë ˆí¼ëŸ°ìŠ¤ì™€ ë‹¤ë¥´ë‹¤. ì´ ë ˆí¼ëŸ°ìŠ¤ì€ ë‹¤ë¥¸ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ê°€ë¦¬í‚¤ëŠ” ê²ƒì´ë¼ì„œ SHA-1 ê°’ì´ ì—†ë‹¤. íŒŒì¼ì„ ì—´ì–´ ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ ìƒê²¼ë‹¤:

	$ cat .git/HEAD
	ref: refs/heads/master

`git checkout test`ë¥¼ ì‹¤í–‰í•˜ë©´ Gitì€ HEAD íŒŒì¼ì„ ì•„ë˜ì™€ ê°™ì´ ë°”ê¾¼ë‹¤:

	$ cat .git/HEAD
	ref: refs/heads/test

`git commit`ì„ ì‹¤í–‰í•˜ë©´ ì»¤ë°‹ ê°œì²´ê°€ ë§Œë“¤ì–´ì§€ëŠ”ë°, ì§€ê¸ˆ HEADê°€ ê°€ë¦¬í‚¤ê³  ìˆë˜ ì»¤ë°‹ì˜ SHA-1 ê°’ì´ ê·¸ ì»¤ë°‹ ê°œì²´ì˜ ë¶€ëª¨ë¡œ ì‚¬ìš©ëœë‹¤.

ì´ íŒŒì¼ë„ ì†ìœ¼ë¡œ ì§ì ‘ í¸ì§‘í•  ìˆ˜ ìˆì§€ë§Œ  `symbolic-ref`ë¼ëŠ” ëª…ë ¹ì–´ê°€ ìˆì–´ì„œ ì¢€ ë” ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ ëª…ë ¹ìœ¼ë¡œ HEADì˜ ê°’ì„ ì½ì„ ìˆ˜ ìˆë‹¤:

	$ git symbolic-ref HEAD
	refs/heads/master

HEADì˜ ê°’ì„ ë³€ê²½í•  ìˆ˜ë„ ìˆë‹¤:

	$ git symbolic-ref HEAD refs/heads/test
	$ cat .git/HEAD
	ref: refs/heads/test

refs í˜•ì‹ì— ë§ì§€ ì•Šìœ¼ë©´ ìˆ˜ì •í•  ìˆ˜ ì—†ë‹¤:

	$ git symbolic-ref HEAD test
	fatal: Refusing to point HEAD outside of refs/

## íƒœê·¸

ì¤‘ìš”í•œ ê°œì²´ëŠ” ëª¨ë‘ ì‚´í´ë´¤ê³  ë‚¨ì€ ê°œì²´ê°€ í•˜ë‚˜ ìˆë‹¤. íƒœê·¸ ê°œì²´ëŠ” ì»¤ë°‹ ê°œì²´ë‘ ë§¤ìš° ë¹„ìŠ·í•˜ë‹¤. ì»¤ë°‹ ê°œì²´ì²˜ëŸ¼ ëˆ„ê°€, ì–¸ì œ íƒœê·¸ë¥¼ ë‹¬ì•˜ëŠ”ì§€ íƒœê·¸ ë©”ì‹œì§€ëŠ” ë¬´ì—‡ì´ê³  ì–´ë–¤ ì»¤ë°‹ì„ ê°€ë¦¬í‚¤ëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ê°€ í¬í•¨ëœë‹¤. íƒœê·¸ ê°œì²´ëŠ” Tree ê°œì²´ê°€ ì•„ë‹ˆë¼ ì»¤ë°‹ ê°œì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” ê²ƒì´ ê·¸ ë‘˜ì˜ ì°¨ì´ë‹¤. ë¸Œëœì¹˜ì²˜ëŸ¼ ì»¤ë°‹ ê°œì²´ë¥¼ ê°€ë¦¬í‚¤ì§€ë§Œ ì˜®ê¸¸ ìˆ˜ëŠ” ì—†ë‹¤. íƒœê·¸ ê°œì²´ëŠ” ëŠ˜ ê·¸ ì´ë¦„ì´ ëœ»í•˜ëŠ” ì»¤ë°‹ë§Œ ê°€ë¦¬í‚¨ë‹¤.

*2ì¥*ì—ì„œ ë°°ì› ë“¯ì´ íƒœê·¸ëŠ” Annotated íƒœê·¸ì™€ Lightweight íƒœê·¸ ë‘ ì¢…ë¥˜ë¡œ ë‚˜ë‰œë‹¤. ë¨¼ì € ì•„ë˜ì™€ ê°™ì´ Lightweight íƒœê·¸ë¥¼ ë§Œë“¤ì–´ ë³´ì:

	$ git update-ref refs/tags/v1.0 cac0cab538b970a37ea1e769cbbde608743bc96d

Lightwieght íƒœê·¸ëŠ” ë§Œë“¤ê¸° ì‰½ë‹¤. ë¸Œëœì¹˜ë‘ ë¹„ìŠ·í•˜ì§€ë§Œ ë¸Œëœì¹˜ì²˜ëŸ¼ ì˜®ê¸¸ ìˆ˜ëŠ” ì—†ë‹¤. ì´ì— ë¹„í•´ Annotated íƒœê·¸ëŠ” ì¢€ ë” ë³µì¡í•˜ë‹¤. Annotated íƒœê·¸ë¥¼ ë§Œë“¤ë©´ Gitì€ íƒœê·¸ ê°œì²´ë¥¼ ë§Œë“¤ê³  ê±°ê¸°ì— ì»¤ë°‹ì„ ê°€ë¦¬í‚¤ëŠ” ë ˆí¼ëŸ°ìŠ¤ë¥¼ ì €ì¥í•œë‹¤. Annotated íƒœê·¸ëŠ” ì»¤ë°‹ì„ ì§ì ‘ ê°€ë¦¬í‚¤ì§€ ì•Šê³  íƒœê·¸ ê°œì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤. `-a` ì˜µì…˜ì„ ì£¼ê³  Annotated íƒœê·¸ë¥¼ ë§Œë“¤ê³  í™•ì¸í•´ë³´ì:

	$ git tag -a v1.1 1a410efbd13591db07496601ebc7a059dd55cfe9 -m 'test tag'

íƒœê·¸ ê°œì²´ì˜ SHA-1 ê°’ì„ í™•ì¸í•œë‹¤:

	$ cat .git/refs/tags/v1.1
	9585191f37f7b0fb9444f35a9bf50de191beadc2

`cat-file` ëª…ë ¹ìœ¼ë¡œ í•´ë‹¹ SHA-1 ê°’ì˜ ë‚´ìš©ì„ ì¡°íšŒí•œë‹¤:

	$ git cat-file -p 9585191f37f7b0fb9444f35a9bf50de191beadc2
	object 1a410efbd13591db07496601ebc7a059dd55cfe9
	type commit
	tag v1.1
	tagger Scott Chacon <schacon@gmail.com> Sat May 23 16:48:58 2009 -0700

	test tag

`object` ë¶€ë¶„ì— ìˆëŠ” SHA-1 ê°’ì´ ì‹¤ì œë¡œ íƒœê·¸ê°€ ê°€ë¦¬í‚¤ëŠ” ì»¤ë°‹ì´ë‹¤. ì»¤ë°‹ ê°œì²´ë¿ë§Œ ì•„ë‹ˆë¼ ëª¨ë“  Git ê°œì²´ì— íƒœê·¸ë¥¼ ë‹¬ ìˆ˜ ìˆë‹¤. ì»¤ë°‹ ê°œì²´ì— íƒœê·¸ë¥¼ ë‹¤ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Git ê°œì²´ì— íƒœê·¸ë¥¼ ë‹¤ëŠ” ê²ƒì´ë‹¤. Gitì„ ê°œë°œí•˜ëŠ” í”„ë¡œì íŠ¸ì—ì„œëŠ” ê´€ë¦¬ìê°€ ìì‹ ì˜ GPG ê³µê°œí‚¤ë¥¼ Blob ê°œì²´ë¡œ ì¶”ê°€í•˜ê³  ê·¸ íŒŒì¼ì— íƒœê·¸ë¥¼ ë‹¬ì•˜ë‹¤. ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ ê·¸ ê³µê°œí‚¤ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤:

	$ git cat-file blob junio-gpg-pub

Linux Kernel ì €ì¥ì†Œì—ë„ ì»¤ë°‹ì´ ì•„ë‹Œ ë‹¤ë¥¸ ê°œì²´ë¥¼ ê°€ë¦¬í‚¤ëŠ” íƒœê·¸ ê°œì²´ê°€ ìˆë‹¤. ê·¸ íƒœê·¸ëŠ” ì €ì¥ì†Œì— ì²˜ìŒìœ¼ë¡œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì„í¬íŠ¸í–ˆì„ ë•Œ ê·¸ ì²« Tree ê°œì²´ë¥¼ ê°€ë¦¬í‚¨ë‹¤.

## ë¦¬ëª¨íŠ¸ ë ˆí¼ëŸ°ìŠ¤

ë¦¬ëª¨íŠ¸ ë ˆí¼ëŸ°ìŠ¤ë¼ëŠ” ê²ƒë„ ìˆë‹¤. ë¦¬ëª¨íŠ¸ë¥¼ ì¶”ê°€í•˜ê³  Pushí•˜ë©´ Gitì€ ê° ë¸Œëœì¹˜ë§ˆë‹¤ Pushí•œ ë§ˆì§€ë§‰ ì»¤ë°‹ì´ ë¬´ì—‡ì¸ì§€ `refs/remotes` ë””ë ‰í† ë¦¬ì— ì €ì¥í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, `origin`ì´ë¼ëŠ” ë¦¬ëª¨íŠ¸ë¥¼ ì¶”ê°€í•˜ê³  `master` ë¸Œëœì¹˜ë¥¼ Push í•œë‹¤:

	$ git remote add origin git@github.com:schacon/simplegit-progit.git
	$ git push origin master
	Counting objects: 11, done.
	Compressing objects: 100% (5/5), done.
	Writing objects: 100% (7/7), 716 bytes, done.
	Total 7 (delta 2), reused 4 (delta 1)
	To git@github.com:schacon/simplegit-progit.git
	   a11bef0..ca82a6d  master -> master

`origin`ì˜ `master` ë¸Œëœì¹˜ì—ì„œ ì„œë²„ì™€ ë§ˆì§€ë§‰ìœ¼ë¡œ êµí™˜í•œ ì»¤ë°‹ì´ ì–´ë–¤ ê²ƒì¸ì§€ `refs/remotes/origin/master` íŒŒì¼ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤:

	$ cat .git/refs/remotes/origin/master
	ca82a6dff817ec66f44342007202690a93763949

ë¦¬ëª¨íŠ¸ ë ˆí¼ëŸ°ìŠ¤ëŠ” Checkoutí•  ìˆ˜ ì—†ë‹¤. `refs/heads`ì— ìˆëŠ” ë ˆí¼ëŸ°ìŠ¤ì¸ ë¸Œëœì¹˜ì™€ ë‹¤ë¥´ë‹¤. ì´ ë¦¬ëª¨íŠ¸ ë ˆí¼ëŸ°ìŠ¤ëŠ” ì„œë²„ì˜ ë¸Œëœì¹˜ê°€ ê°€ë¦¬í‚¤ëŠ” ì»¤ë°‹ì´ ë¬´ì—‡ì¸ì§€ ì ì–´ë‘” ì¼ì¢…ì˜ ë¶ë§ˆí¬ì´ë‹¤.
. ê·¸ë¦¬ê³  ë‚˜ì„œ Tree ê°œì²´ë¥¼ ë§Œë“ ë‹¤:

	$ echo 'new file' > new.txt
	$ git update-index test.txt
	$ git update-index --add new.txt

ìƒˆ íŒŒì¼ì¸ new.txtì™€ ìƒˆë¡œìš´ ë²„ì „ì˜ test.txt íŒŒì¼ê¹Œì§€ Staging Areaì— ì¶”ê°€í–ˆë‹¤. í˜„ì¬ ìƒíƒœì˜ Staging Areaë¥¼ ìƒˆë¡œìš´ Tree ê°œì²´ë¡œ ê¸°ë¡í•˜ë©´ ì–´ë–»ê²Œ ë³´ì´ëŠ”ì§€ ì‚´í´ë³´ì:

	$ git write-tree
	0155eb4229851634a0f03eb265b69f5a2d56f341
	$ git cat-file -p 0155eb4229851634a0f03eb265b69f5a2d56f341
	100644 blob fa49b077972391ad58037050f2a75f74e3671e92      new.txt
	100644 blob 1f7a7a472abf3dd9643fd615f6da379c4acb3e3a      test.txt

ì´ Tree ê°œì²´ì—ëŠ” íŒŒì¼ì´ ë‘ ê°œ ìˆê³  test.txt íŒŒì¼ì˜ SHA ê°’ë„ ë‘ ë²ˆì§¸ ë²„ì „ì¸ `1f7a7a1`ì´ë‹¤. ì¬ë¯¸ë‚œ ê±¸ í•´ë³´ì. ì²˜ìŒì— ë§Œë“  Tree ê°œì²´ë¥¼ í•˜ìœ„ ë””ë ‰í† ë¦¬ë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. `read-tree` ëª…ë ¹ìœ¼ë¡œ Tree ê°œì²´ë¥¼ ì½ì–´ Staging Areaì— ì¶”ê°€í•œë‹¤. `--prefix` ì˜µì…˜ì„ ì£¼ë©´ Tree ê°œì²´ë¥¼ í•˜ìœ„ ë””ë ‰í† ë¦¬ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

	$ git read-tree --prefix=bak d8329fc1cc938780ffdd9f94e0d364e0ea74f579
	$ git write-tree
	3c4e9cd789d88d8d89c1073707c3585e41b0e614
	$ git cat-file -p 3c4e9cd789d88d8d89c1073707c3585e41b0e614
	040000 tree d8329fc1cc938780ffdd9f94e0d364e0ea74f579      bak
	100644 blob fa49b077972391ad58037050f2a75f74e3671e92      new.txt
	100644 blob 1f7a7a472abf3dd9643fd615f6da379c4acb3e3a      test.txt

ì´ Tree ê°œì²´ë¡œ ì›Œí‚¹ ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ë©´ íŒŒì¼ ë‘ ê°œì™€ `bak`ì´ë¼ëŠ” í•˜ìœ„ ë””ë ‰í† ë¦¬ê°€ ìƒê¸´ë‹¤. ê·¸ë¦¬ê³  `bak` ë””ë ‰í† ë¦¬ ì•ˆì—ëŠ” test.txt íŒŒì¼ì˜ ì²˜ìŒ ë²„ì „ì´ ë“¤ì–´ ìˆë‹¤. ê·¸ë¦¼ 9-2ì™€ ê°™ì€ êµ¬ì¡°ë¡œ ë°ì´í„°ê°€ ì €ì¥ëœë‹¤.


![](http://git-scm.com/figures/18333fig0902-tn.png)

ê·¸ë¦¼ 9-2. í˜„ì¬ Git ë°ì´í„° êµ¬ì¡°

## ì»¤ë°‹ ê°œì²´

ê°ê¸° ë‹¤ë¥¸ ìŠ¤ëƒ…ìƒ·ì„ ë‚˜íƒ€ë‚´ëŠ” Tree ê°œì²´ë¥¼ ì„¸ ê°œ ë§Œë“¤ì—ˆë‹¤. í•˜ì§€ë§Œ, ì—¬ì „íˆ ì´ ìŠ¤ëƒ…ìƒ·ì„ ë¶ˆëŸ¬ ì˜¤ë ¤ë©´ SHA-1 ê°’ì„ ê¸°ì–µí•˜ê³  ìˆì–´ì•¼ í•œë‹¤. ìŠ¤ëƒ…ìƒ·ì„ ëˆ„ê°€, ì–¸ì œ, ì™œ ì €ì¥í–ˆëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ëŠ” ì•„ì˜ˆ ì—†ë‹¤. ì´ëŸ° ì •ë³´ëŠ” ì»¤ë°‹ ê°œì²´ì— ì €ì¥ëœë‹¤:

ì»¤ë°‹ ê°œì²´ëŠ” `commit-tree` ëª…ë ¹ìœ¼ë¡œ ë§Œë“ ë‹¤. ì´ ëª…ë ¹ì— ì»¤ë°‹ ê°œì²´ì— ëŒ€í•œ ì„¤ëª…ê³¼ Tree ê°œì²´ì˜ SHA-1 ê°’ í•œ ê°œë¥¼ ë„˜ê¸´ë‹¤. ì•ì„œ ì €ì¥í•œ ì²« ë²ˆì§¸ Treeë¥¼ ê°€ì§€ê³  ì•„ë˜ì™€ ê°™ì´ ë§Œë“¤ì–´ ë³¸ë‹¤:

	$ echo 'first commit' | git commit-tree d8329f
	fdf4fc3344e67ab068f836878b6c4951e3b15f3d

ìƒˆë¡œ ìƒê¸´ ì»¤ë°‹ ê°œì²´ë¥¼ `cat-file` ëª…ë ¹ìœ¼ë¡œ í™•ì¸í•´ë³´ì:

	$ git cat-file -p fdf4fc3
	tree d8329fc1cc938780ffdd9f94e0d364e0ea74f579
	author Scott Chacon <schacon@gmail.com> 1243040974 -0700
	committer Scott Chacon <schacon@gmail.com> 1243040974 -0700

	first commit

ì»¤ë°‹ ê°œì²´ì˜ í˜•ì‹ì€ ê°„ë‹¨í•˜ë‹¤. í•´ë‹¹ ìŠ¤ëƒ…ìƒ·ì—ì„œ ìµœìƒë‹¨ Treeë¥¼(ì—­ì£¼ - ë£¨íŠ¸ ë””ë ‰í„°ë¦¬ ê°™ì€) í•˜ë‚˜ ê°€ë¦¬í‚¨ë‹¤. ê·¸ë¦¬ê³  `user.name`ê³¼ `user.email` ì„¤ì •ì—ì„œ ê°€ì ¸ì˜¨ Author/Committer ì •ë³´, ì‹œê°„ ì •ë³´, ê·¸ë¦¬ê³  í•œ ì¤„ ë„ìš´ ë‹¤ìŒ ì»¤ë°‹ ë©”ì‹œì§€ê°€ ë“¤ì–´ ê°„ë‹¤.

ì´ì œ ì»¤ë°‹ ê°œì²´ë¥¼ ë‘ ê°œ ë” ë§Œë“¤ì–´ ë³´ì. ê° ì»¤ë°‹ ê°œì²´ëŠ” ì´ì „ ê°œì²´ë¥¼ ê°€ë¦¬í‚¤ë„ë¡ í•œë‹¤:

	$ echo 'second commit' | git commit-tree 0155eb -p fdf4fc3
	cac0cab538b970a37ea1e769cbbde608743bc96d
	$ echo 'third commit'  | git commit-tree 3c4e9c -p cac0cab
	1a410efbd13591db07496601ebc7a059dd55cfe9

ì„¸ ì»¤ë°‹ ê°œì²´ëŠ” ê°ê° í•´ë‹¹ ìŠ¤ëƒ…ìƒ·ì„ ë‚˜íƒ€ë‚´ëŠ” Tree ê°œì²´ë¥¼ í•˜ë‚˜ì”© ê°€ë¦¬í‚¤ê³  ìˆë‹¤. ì´ìƒí•´ ë³´ì´ê² ì§€ë§Œ ìš°ë¦¬ëŠ” ì§„ì§œ Git íˆìŠ¤í† ë¦¬ë¥¼ ë§Œë“¤ì—ˆë‹¤. ë§ˆì§€ë§‰ ì»¤ë°‹ ê°œì²´ì˜ SHA-1 ê°’ì„ ì£¼ê³  `git log` ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì¶œë ¥í•œë‹¤:

	$ git log --stat 1a410e
	commit 1a410efbd13591db07496601ebc7a059dd55cfe9
	Author: Scott Chacon <schacon@gmail.com>
	Date:   Fri May 22 18:15:24 2009 -0700

	    third commit

	 bak/test.txt |    1 +
	 1 files changed, 1 insertions(+), 0 deletions(-)

	commit cac0cab538b970a37ea1e769cbbde608743bc96d
	Author: Scott Chacon <schacon@gmail.com>
	Date:   Fri May 22 18:14:29 2009 -0700

	    second commit

	 new.txt  |    1 +
	 test.txt |    2 +-
	 2 files changed, 2 insertions(+), 1 deletions(-)

	commit fdf4fc3344e67ab068f836878b6c4951e3b15f3d
	Author: Scott Chacon <schacon@gmail.com>
	Date:   Fri May 22 18:09:34 2009 -0700

	    first commit

	 test.txt |    1 +
	 1 files changed, 1 insertions(+), 0 deletions(-)

ë†€ëì§€ ì•Šì€ê°€! ë°©ê¸ˆ ìš°ë¦¬ëŠ” ê³ ìˆ˜ì¤€ ëª…ë ¹ì–´ ì—†ì´ ì €ìˆ˜ì¤€ì˜ ëª…ë ¹ìœ¼ë¡œë§Œ Git íˆìŠ¤í† ë¦¬ë¥¼ ë§Œë“¤ì—ˆë‹¤. ì§€ê¸ˆ í•œ ì¼ì´ `git add`ì™€ `git commit` ëª…ë ¹ì„ ì‹¤í–‰í–ˆì„ ë•Œ Git ë‚´ë¶€ì—ì„œ ì¼ì–´ë‚˜ëŠ” ì¼ì´ë‹¤. Gitì€ ë³€ê²½ëœ íŒŒì¼ì„ Blob ê°œì²´ë¡œ ì €ì¥í•˜ê³  í˜„ Indexì— ë”°ë¼ì„œ Tree ê°œì²´ë¥¼ ë§Œë“ ë‹¤. ê·¸ë¦¬ê³  ì´ì „ ì»¤ë°‹ ê°œì²´ì™€ ìµœìƒìœ„ Tree ê°œì²´ë¥¼ ì°¸ê³ í•´ì„œ ì»¤ë°‹ ê°œì²´ë¥¼ ë§Œë“ ë‹¤. ì¦‰ Blob, Tree, ì»¤ë°‹ ê°œì²´ê°€ Gitì˜ ì£¼ìš” ê°œì²´ì´ê³  ì´ ê°œì²´ëŠ” ì „ë¶€ `.git/objects` ë””ë ‰í† ë¦¬ì— ì €ì¥ëœë‹¤. ì´ ì˜ˆì œì—ì„œ ìƒì„±í•œ ê°œì²´ëŠ” ì•„ë˜ì™€ ê°™ë‹¤:

	$ find .git/objects -type f
	.git/objects/01/55eb4229851634a0f03eb265b69f5a2d56f341 # tree 2
	.git/objects/1a/410efbd13591db07496601ebc7a059dd55cfe9 # commit 3
	.git/objects/1f/7a7a472abf3dd9643fd615f6da379c4acb3e3a # test.txt v2
	.git/objects/3c/4e9cd789d88d8d89c1073707c3585e41b0e614 # tree 3
	.git/objects/83/baae61804e65cc73a7201a7252750c76066a30 # test.txt v1
	.git/objects/ca/c0cab538b970a37ea1e769cbbde608743bc96d # commit 2
	.git/objects/d6/70460b4b4aece5915caf5c68d12f560a9fe3e4 # 'test content'
	.git/objects/d8/329fc1cc938780ffdd9f94e0d364e0ea74f579 # tree 1
	.git/objects/fa/49b077972391ad58037050f2a75f74e3671e92 # new.txt
	.git/objects/fd/f4fc3344e67ab068f836878b6c4951e3b15f3d # commit 1

ë‚´ë¶€ì˜ í¬ì¸í„°ë¥¼ ë”°ë¼ê°€ë©´ ê·¸ë¦¼ 9-3ê³¼ ê°™ì€ ê·¸ë˜í”„ê°€ ê·¸ë ¤ì§„ë‹¤.


![](http://git-scm.com/figures/18333fig0903-tn.png)

ê·¸ë¦¼ 9-3. Git ì €ì¥ì†Œ ë‚´ì˜ ëª¨ë“  ê°œì²´

## ê°œì²´ ì €ì¥ì†Œ

ë‚´ìš©ê³¼ í•¨ê»˜ í—¤ë”ë„ ì €ì¥í•œë‹¤ê³  ì–˜ê¸°í–ˆë‹¤. ì ì‹œ Gitì´ ê°œì²´ë¥¼ ì–´ë–»ê²Œ ì €ì¥í•˜ëŠ”ì§€ë¶€í„° ì‚´í´ë³´ì. "what is up, doc?"ì´ë¼ëŠ” ë¬¸ìì—´ì„ ê°€ì§€ê³  ëŒ€í™”í˜• Ruby ì‰˜ `irb` ëª…ë ¹ì–´ë¡œ í‰ë‚´ ë‚´ ë³´ì:

	$ irb
	>> content = "what is up, doc?"
	=> "what is up, doc?"

Gitì€ ê°œì²´ì˜ íƒ€ì…ì„ ì‹œì‘ìœ¼ë¡œ í—¤ë”ë¥¼ ë§Œë“ ë‹¤. ê·¸ë‹¤ìŒì— ê³µë°± ë¬¸ì í•˜ë‚˜, ë‚´ìš©ì˜ í¬ê¸°, ë§ˆì§€ë§‰ì— ë„ ë¬¸ìë¥¼ ì¶”ê°€í•œë‹¤:

	>> header = "blob #{content.length}\0"
	=> "blob 16\000"

Gitì€ í—¤ë”ì™€ ì›ë˜ ë‚´ìš©ì„ í•©ì³ì„œ SHA-1 ì²´í¬ì„¬ì„ ê³„ì‚°í•œë‹¤. Rubyì—ì„œë„ `require`ë¡œ SHA1 ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ê°€ì ¸ë‹¤ê°€ í‰ë‚´ ë‚¼ ìˆ˜ ìˆë‹¤. `require`ë¡œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í¬í•¨í•˜ê³  ë‚˜ì„œ `Digest::SHA1.hexdigest()`ë¥¼ í˜¸ì¶œí•œë‹¤:

	>> store = header + content
	=> "blob 16\000what is up, doc?"
	>> require 'digest/sha1'
	=> true
	>> sha1 = Digest::SHA1.hexdigest(store)
	=> "bd9dbf5aae1a3862dd1526723246b20206e5fc37"

Gitì€ ë˜ zlibìœ¼ë¡œ ë‚´ìš©ì„ ì••ì¶•í•œë‹¤. Rubyì—ë„ zlib ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆìœ¼ë‹ˆ Rubyì—ì„œë„ í•  ìˆ˜ ìˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í¬í•¨í•˜ê³  `Zlib::Deflate.deflate()`ë¥¼ í˜¸ì¶œí•œë‹¤:

	>> require 'zlib'
	=> true
	>> zlib_content = Zlib::Deflate.deflate(store)
	=> "x\234K\312\311OR04c(\317H,Q\310,V(-\320QH\311O\266\a\000_\034\a\235"

ë§ˆì§€ë§‰ìœ¼ë¡œ zlibìœ¼ë¡œ ì••ì¶•í•œ ë‚´ìš©ì„ ê°œì²´ë¡œ ì €ì¥í•œë‹¤. SHA-1 ê°’ ì¤‘ì—ì„œ ë§¨ ì•ì— ìˆëŠ” ë‘ ìë¥¼ ê°€ì ¸ë‹¤ í•˜ìœ„ ë””ë ‰í† ë¦¬ ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ë‚˜ë¨¸ì§€ 38ìë¥¼ ê·¸ ë””ë ‰í† ë¦¬ ì•ˆì— ìˆëŠ” íŒŒì¼ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤. Rubyì—ì„œëŠ” `FileUtils.mkdir_p()`ë¡œ í•˜ìœ„ ë””ë ‰í† ë¦¬ì˜ ì¡´ì¬ë¥¼ ë³´ì¥í•˜ê³  ë‚˜ì„œ `File.open()`ìœ¼ë¡œ íŒŒì¼ì„ ì—°ë‹¤. ê·¸ë¦¬ê³  ê·¸ íŒŒì¼ì— zlibìœ¼ë¡œ ì••ì¶•í•œ ë‚´ìš©ì„ `write()` í•¨ìˆ˜ë¡œ ì €ì¥í•œë‹¤.

	>> path = '.git/objects/' + sha1[0,2] + '/' + sha1[2,38]
	=> ".git/objects/bd/9dbf5aae1a3862dd1526723246b20206e5fc37"
	>> require 'fileutils'
	=> true
	>> FileUtils.mkdir_p(File.dirname(path))
	=> ".git/objects/bd"
	>> File.open(path, 'w') { |f| f.write zlib_content }
	=> 32

ë‹¤ ëë‹¤. ì´ì œ Git Blob ê°œì²´ë¥¼ ì†ìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤. Git ê°œì²´ëŠ” ëª¨ë‘ ì´ ë°©ì‹ìœ¼ë¡œ ì €ì¥í•˜ë©° ë‹¨ì§€ ì¢…ë¥˜ë§Œ ë‹¤ë¥´ë‹¤. í—¤ë”ê°€ `blob`ì´ ì•„ë‹ˆë¼ ê·¸ëƒ¥ `commit`ì´ë‚˜ `tree`ë¡œ ì‹œì‘í•˜ê²Œ ë˜ëŠ” ê²ƒë¿ì´ë‹¤. Blob ê°œì²´ëŠ” ì—¬ê¸°ì„œ ë³´ì—¬ì¤€ ê²ƒê³¼ ê±°ì˜ ê°™ì§€ë§Œ ì»¤ë°‹ì´ ê°œì²´ë‚˜ Tree ê°œì²´ëŠ” ê°ê¸° ë‹¤ë¥¸ í˜•ì‹ì„ ì‚¬ìš©í•œë‹¤.
¬ê³  ê·¸ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•´ì„œ ì´ ëª…ë ¹ì˜ í‘œì¤€ì¶œë ¥ì„ `git fast-import` ëª…ë ¹ì˜ í‘œì¤€ì…ë ¥ìœ¼ë¡œ ì—°ê²°í•œë‹¤(pipe).

	$ git init
	Initialized empty Git repository in /opt/import_to/.git/
	$ ruby import.rb /opt/import_from | git fast-import
	git-fast-import statistics:
	---------------------------------------------------------------------
	Alloc'd objects:       5000
	Total objects:           18 (         1 duplicates                  )
	      blobs  :            7 (         1 duplicates          0 deltas)
	      trees  :            6 (         0 duplicates          1 deltas)
	      commits:            5 (         0 duplicates          0 deltas)
	      tags   :            0 (         0 duplicates          0 deltas)
	Total branches:           1 (         1 loads     )
	      marks:           1024 (         5 unique    )
	      atoms:              3
	Memory total:          2255 KiB
	       pools:          2098 KiB
	     objects:           156 KiB
	---------------------------------------------------------------------
	pack_report: getpagesize()            =       4096
	pack_report: core.packedGitWindowSize =   33554432
	pack_report: core.packedGitLimit      =  268435456
	pack_report: pack_used_ctr            =          9
	pack_report: pack_mmap_calls          =          5
	pack_report: pack_open_windows        =          1 /          1
	pack_report: pack_mapped              =       1356 /       1356
	---------------------------------------------------------------------

ì„±ê³µì ìœ¼ë¡œ ëë‚˜ë©´ ì—¬ê¸°ì„œ ë³´ì—¬ì£¼ëŠ” ê²ƒì²˜ëŸ¼ ì–´ë–»ê²Œ ëëŠ”ì§€ í†µê³„ë¥¼ ë³´ì—¬ì¤€ë‹¤. ì´ ê²½ìš°ì—” ë¸Œëœì¹˜ 1ê°œì™€ ì»¤ë°‹ 5ê°œ ê·¸ë¦¬ê³  ê°œì²´ 18ê°œê°€ ì„í¬íŠ¸ëë‹¤. `git log` ëª…ë ¹ìœ¼ë¡œ íˆìŠ¤í† ë¦¬ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤:

	$ git log -2
	commit 10bfe7d22ce15ee25b60a824c8982157ca593d41
	Author: Scott Chacon <schacon@example.com>
	Date:   Sun May 3 12:57:39 2009 -0700

	    imported from current

	commit 7e519590de754d079dd73b44d695a42c9d2df452
	Author: Scott Chacon <schacon@example.com>
	Date:   Tue Feb 3 01:00:00 2009 -0700

	    imported from back_2009_02_03

ì´ ì‹œì ì—ì„œëŠ” ì•„ë¬´ê²ƒë„ Checkoutí•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì›Œí‚¹ ë””ë ‰í† ë¦¬ì— ì•„ì§ ì•„ë¬´ íŒŒì¼ë„ ì—†ë‹¤. `master` ë¸Œëœì¹˜ë¡œ Resetí•´ì„œ íŒŒì¼ì„ Checkoutí•œë‹¤:

	$ ls
	$ git reset --hard master
	HEAD is now at 10bfe7d imported from current
	$ ls
	file.rb  lib

`fast-import` ëª…ë ¹ìœ¼ë¡œ ë§ì€ ì¼ì„ í•  ìˆ˜ ìˆë‹¤. ëª¨ë“œë¥¼ ì„¤ì •í•˜ê³ , ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë¥¼ ë‹¤ë£¨ê³ , ë¸Œëœì¹˜ë¥¼ ì—¬ëŸ¬ ê°œ ë‹¤ë£¨ê³ , Mergeí•˜ê³ , íƒœê·¸ë¥¼ ë‹¬ê³ , ì§„í–‰ìƒí™©ì„ ë³´ì—¬ ì£¼ê³ , ë“±ë“± ë¬´ìˆ˜íˆ ë§ì€ ì¼ì„ í•  ìˆ˜ ìˆë‹¤. Git ì†ŒìŠ¤ì˜ `contrib/fast-import` ë””ë ‰í† ë¦¬ì— ë³µì¡í•œ ìƒí™©ì„ ë‹¤ë£¨ëŠ” ì˜ˆì œê°€ ë§ë‹¤. ê·¸ ì¤‘ ì—¬ê¸°ì„œ ì„¤ëª…í•œ `git-p4` ìŠ¤í¬ë¦½íŠ¸ê°€ ì¢‹ì€ ì˜ˆì œì´ë‹¤.
